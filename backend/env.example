COINBASE_API_KEY=
COINBASE_API_SECRET=
# Optional: enables CoinMarketCap fallback providers for macro/global and top-volume discovery.
COINMARKETCAP_API_KEY=
AGENT_WALLET_ID=
NETWORK_ID=base-mainnet
BASE_MAINNET_RPC=
BASE_SEPOLIA_RPC=
USDC_CONTRACT_ADDRESS=

# Backend-authoritative wizard pricing (USDC)
STRUCTURED_ALLOCATION_PRICE_USDC=19
CERTIFIED_DECISION_RECORD_FEE_USDC=15
# Additional x402 tool pricing (USDC)
X402_MARKET_REGIME_PRICE_USDC=0.25
X402_POLICY_ENVELOPE_PRICE_USDC=0.25
X402_ASSET_SCORECARD_PRICE_USDC=0.5
X402_REBALANCE_PRICE_USDC=1

# Optional: promo code grants (free and percentage discount).
# JSON format:
# SELUN_FREE_CODES_JSON=[{"code":"BETA100","maxUses":100,"includeCertifiedDecisionRecord":true,"discountPercent":100,"expiresAt":"2026-12-31T23:59:59Z"},{"code":"SAVE20","maxUses":500,"includeCertifiedDecisionRecord":true,"discountPercent":20}]
# CSV fallback format (one use per code):
# SELUN_FREE_CODES=CODE1,CODE2
SELUN_FREE_CODES_JSON=
SELUN_FREE_CODES=

# Optional: if separate from COINBASE_API_SECRET in your CDP setup
COINBASE_WALLET_SECRET=

# Optional: Resend email notifications
# Send admin usage events for /agent/pay and /agent/x402/allocate.
RESEND_API_KEY=
SELUN_EMAIL_FROM=
SELUN_ADMIN_USAGE_EMAILS_ENABLED=0
SELUN_ADMIN_USAGE_EMAILS=
# Optional: send allocation summary emails after generation and report emails from the backend.
SELUN_RESULT_EMAILS_ENABLED=0

# Phase 5 scoring provider:
# - deterministic (default): rules-based local scoring, no paid model API
# - messari: model-based scoring via Messari AI endpoint
PHASE5_AGENT_SCORING_PROVIDER=deterministic
# Maximum number of stablecoins allowed in Phase 5 selected shortlist.
# If set to 1, the selected stablecoin is the one with highest
# volume_24h_usd, then liquidity_score, structural_score, screening_score,
# and finally lower market_cap_rank.
PHASE5_MAX_SELECTED_STABLECOINS=1

# Required only when PHASE5_AGENT_SCORING_PROVIDER=messari
MESSARI_API_KEY=
# Optional model label for audit traces when using Messari.
PHASE5_AGENT_SCORING_MODEL=messari-default

# Optional runtime tuning
PAYMENT_CONFIRMATIONS=2
PAYMENT_POLL_INTERVAL_MS=4000
PAYMENT_TIMEOUT_MS=120000

# Optional: x402 endpoint controls (`/agent/x402/*`).
# Default facilitator depends on NETWORK_ID:
# - base-sepolia -> https://www.x402.org/facilitator
# - base-mainnet -> https://api.cdp.coinbase.com/platform/v2/x402
X402_FACILITATOR_URL=
# Optional explicit CDP credentials for authenticated mainnet verify/settle.
# If omitted on base-mainnet, Selun falls back to COINBASE_API_KEY / COINBASE_API_SECRET.
CDP_API_KEY_ID=
CDP_API_KEY_SECRET=
# Exact-EVM payment requirements must include the ERC-20 token's EIP-712 domain.
# Leave blank to use Selun's built-in defaults for known USDC assets.
# For Base Sepolia USDC, the correct domain is `USDC` / `2`.
X402_EIP712_DOMAIN_NAME=
X402_EIP712_DOMAIN_VERSION=
# Replay/quote state is persisted to `backend/data/x402-state.json` by default.
X402_QUOTE_TTL_MS=600000
X402_IP_BURST_WINDOW_MS=60000
X402_IP_BURST_LIMIT=60
X402_FROM_ADDRESS_DAILY_CAP=20
X402_GLOBAL_CONCURRENCY_CAP=8
# Optional absolute/relative path override for durable x402 state persistence.
X402_STATE_FILE=
# Optional retention window for daily-usage counters in persisted state.
X402_STATE_RETENTION_DAYS=3
# Optional Express trust-proxy value (false | true | number of hops | subnet keyword).
TRUST_PROXY=false

# Optional: forward completed Phase 6 output to AAA allocator endpoint.
# Set AAA_ALLOCATE_HMAC_SECRET to the same value as AAA's SELUN_ALLOCATE_HMAC_SECRET.
AAA_ALLOCATE_ENABLED=1
AAA_API_BASE_URL=http://localhost:8000
SELUN_EXECUTION_STATUS_BASE_URL=http://localhost:8787
AAA_ALLOCATE_HMAC_SECRET=
AAA_ALLOCATE_TIMEOUT_MS=15000

# Optional: dynamic Phase 1 source routing order (comma-separated).
# The first healthy/usable source in each list is selected; all attempts are audited.
# Supported values:
# - PHASE1_VOLATILITY_SOURCE_ORDER: coingecko,coinbase,binance,kraken_ohlc
# - PHASE1_GLOBAL_METRICS_SOURCE_ORDER: coingecko,coinpaprika,coinlore,coinmarketcap
# - PHASE1_SENTIMENT_SOURCE_ORDER: cryptocompare,alternative_me,coindesk_rss
PHASE1_VOLATILITY_SOURCE_ORDER=coingecko,coinbase
PHASE1_GLOBAL_METRICS_SOURCE_ORDER=coingecko,coinpaprika
PHASE1_SENTIMENT_SOURCE_ORDER=cryptocompare,alternative_me

# Optional: controlled discovery pools for providers not in the preferred order.
# The runtime ranks these providers by historical credibility and latency.
PHASE1_DISCOVERY_VOLATILITY_POOL=binance,kraken_ohlc
PHASE1_DISCOVERY_GLOBAL_METRICS_POOL=coinlore,coinmarketcap
PHASE1_DISCOVERY_SENTIMENT_POOL=coindesk_rss

# Optional: minimum number of successful providers to blend per domain.
PHASE1_VOLATILITY_SOURCE_TARGET=2
PHASE1_GLOBAL_METRICS_SOURCE_TARGET=2
PHASE1_SENTIMENT_SOURCE_TARGET=3

PHASE1_MAX_USABLE_DATA_ATTEMPTS=12
PHASE1_RETRY_DELAY_MS=2000
PHASE1_MAX_RETRY_DELAY_MS=12000
PHASE1_SNAPSHOT_MAX_AGE_MS=21600000

# Phase 2 AgentKit judgement is mandatory.
# If agent authentication fails, Phase 2+ execution stops and no fallback output is produced.

# Optional: keep Phase 3 universe retail-safe by excluding wrapped tokens
# and tokenized proxy instruments from candidate output.
PHASE3_RETAIL_FILTER_ENABLED=1

# Optional: top-volume source routing for Phase 3 (with discovery).
# Supported values: coingecko,coinlore,coinpaprika,coinmarketcap
PHASE3_TOP_VOLUME_SOURCE_ORDER=coingecko,coinlore,coinpaprika
PHASE3_DISCOVERY_TOP_VOLUME_POOL=coinmarketcap

# Optional: allow meme-category tokens through Phase 3 structural exclusion.
# Default is disabled for retail safety.
PHASE4_ALLOW_MEME_TOKENS=0

# Optional: minimum delay between CoinGecko profile chunk calls in Phase 3
# to reduce HTTP 429 rate-limit errors.
PHASE3_COINGECKO_MIN_INTERVAL_MS=1200

# Optional: JSON alias map for profile token ID migrations without code deploy.
# Example: {"maker":"sky","old-id":"new-id"}
PHASE3_PROFILE_TOKEN_ALIASES_JSON=

PORT=8787
